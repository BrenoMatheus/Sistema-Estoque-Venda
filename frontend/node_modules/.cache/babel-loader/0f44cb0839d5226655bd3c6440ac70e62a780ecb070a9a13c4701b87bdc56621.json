{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport ComprasService from '@/shared/services/api/compras/ComprasService';\nimport DashboardComponent from '../Dashboard/DashboardComponent';\nimport SelectPessoaComponent from '@/components/SelectPessoaComponent';\nimport SelectProdutoComponent from '@/components/SelectProdutoComponent';\nimport { ref, reactive, watchEffect } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nexport default {\n  name: 'BuyDetailComponent',\n  components: {\n    DashboardComponent,\n    SelectPessoaComponent,\n    SelectProdutoComponent\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const formRef = ref(null);\n    const id = route.params.id || 'nova';\n    const formData = reactive({\n      data: '',\n      pessoa_id: '',\n      produto_id: '',\n      quantidade: '',\n      preco: ''\n    });\n    const triedToSubmit = ref(false);\n    watchEffect(() => {\n      if (id !== 'nova') {\n        ComprasService.getById(id).then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n            router.push('/compra');\n          } else {\n            formData.data = result.data;\n            formData.produto_id = result.produto_id;\n            formData.pessoa_id = result.pessoa_id;\n            formData.quantidade = result.quantidade;\n            formData.preco = result.preco;\n          }\n        });\n      } else {\n        formRef.value?.setData({});\n      }\n    });\n    const handleSave = () => {\n      triedToSubmit.value = true;\n      if (id === 'nova') {\n        ComprasService.cadastrar(formData).then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n          } else {\n            router.push(`/compra`);\n          }\n        });\n      } else {\n        ComprasService.atualizar(id, {\n          id: id,\n          ...formData\n        }).then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n          } else {\n            router.push('/compra');\n          }\n        });\n      }\n    };\n    return {\n      formRef,\n      formData,\n      handleSave\n    };\n  }\n};","map":{"version":3,"names":["ComprasService","DashboardComponent","SelectPessoaComponent","SelectProdutoComponent","ref","reactive","watchEffect","useRoute","useRouter","name","components","setup","route","router","formRef","id","params","formData","data","pessoa_id","produto_id","quantidade","preco","triedToSubmit","getById","then","result","Error","alert","message","push","value","setData","handleSave","cadastrar","atualizar"],"sources":["/home/brenomatheus/Documentos/Sistema de Controle de estoque e venda/BrenoMatheus-Sistema-Estoque-Venda/frontend/src/pages/Compra/DetailComponent.vue"],"sourcesContent":["<template>\n  <DashboardComponent>\n    <template v-slot:slot-pages>\n      <div class=\"flex justify-center items-center text-gray-700 dark:text-white\">\n        <div class=\"w-full p-4 sm:p-6 md:p-8 dark:bg-gray-800\">\n          <h5\n            class=\"text-xl font-medium text-gray-900 dark:text-white text-center border-b-2 mb-4 pb-4 border-gray-900\"\n          >\n            Cadastro de Compra\n          </h5>\n          <div class=\"w-auto\">\n            <form ref=\"{formRef}\" @submit.prevent=\"handleSave\" class=\"p-2\">\n              <div class=\"flex flex-wrap -mx-3 mb-6\">\n                <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                  <label\n                    class=\"block uppercase tracking-wide  text-xs font-bold mb-2\"\n                    for=\"data\"\n                  >\n                    Data\n                  </label>\n                  <input\n                    v-model=\"formData.data\"\n                    class=\"appearance-none block text-gray-700 w-full bg-gray-200  border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                    id=\"data\"\n                    type=\"date\"\n                  />\n                </div>\n              </div>\n              <div class=\"flex flex-wrap -mx-3 mb-2\">\n                <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                  <label\n                    for=\"grid-state\"\n                    class=\"block uppercase tracking-wide  text-xs font-bold mb-2\"\n                    >Fornecedor</label\n                  >\n                  <SelectPessoaComponent\n                    v-model=\"formData.pessoa_id\"\n                    :initialPeople=\"formData.pessoa_id\"\n                    :grupo-id=\"2\"\n                  />\n                </div>\n                <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                  <label\n                    for=\"grid-state\"\n                    class=\"block uppercase tracking-wide  text-xs font-bold mb-2\"\n                    >Produto</label\n                  >\n                  <SelectProdutoComponent\n                    v-model=\"formData.produto_id\"\n                    :initialProduct=\"formData.produto_id\"\n                  />\n                </div>\n              </div>\n              <div class=\"flex flex-wrap -mx-3 mb-6\">\n                <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                  <label\n                    class=\"block uppercase tracking-wide  text-xs font-bold mb-2\"\n                    for=\"quantidade\"\n                  >\n                    Quantidade\n                  </label>\n                  <input\n                    class=\"appearance-none block w-full text-gray-700 bg-gray-200  border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                    id=\"quantidade\"\n                    type=\"number\"\n                    v-model=\"formData.quantidade\"\n                  />\n                </div>\n                <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                  <label\n                    class=\"block uppercase tracking-wide  text-xs font-bold mb-2\"\n                    for=\"preco\"\n                  >\n                    Pre√ßo\n                  </label>\n                  <input\n                    v-model=\"formData.preco\"\n                    class=\"appearance-none block w-full text-gray-700 bg-gray-200  border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                    id=\"preco\"\n                    type=\"number\"\n                  />\n                </div>\n              </div>\n\n              <div class=\"pt-4\">\n                <button\n                  type=\"submit\"\n                  class=\"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\"\n                >\n                  Cadastrar\n                </button>\n              </div>\n              <div class=\"mt-4\">\n                <span\n                  class=\"text-center text-sm\"\n                  :class=\"{\n                    'text-green-500': sucesso,\n                    'text-red-500': !sucesso && feedbackMessage,\n                  }\"\n                  >{{ feedbackMessage }}</span\n                >\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </template>\n  </DashboardComponent>\n</template>\n\n<script>\nimport ComprasService from '@/shared/services/api/compras/ComprasService';\nimport DashboardComponent from '../Dashboard/DashboardComponent';\nimport SelectPessoaComponent from '@/components/SelectPessoaComponent';\nimport SelectProdutoComponent from '@/components/SelectProdutoComponent';\nimport { ref, reactive, watchEffect } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\n\nexport default {\n  name: 'BuyDetailComponent',\n\n  components: {\n    DashboardComponent,\n    SelectPessoaComponent,\n    SelectProdutoComponent,\n  },\n\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const formRef = ref(null);\n    const id = route.params.id || 'nova';\n    const formData = reactive({\n      data: '',\n      pessoa_id: '',\n      produto_id: '',\n      quantidade: '',\n      preco: '',\n    });\n    const triedToSubmit = ref(false);\n\n    watchEffect(() => {\n      if (id !== 'nova') {\n        ComprasService.getById(id).then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n            router.push('/compra');\n          } else {\n            formData.data = result.data;\n            formData.produto_id = result.produto_id;\n            formData.pessoa_id = result.pessoa_id;\n            formData.quantidade = result.quantidade;\n            formData.preco = result.preco;\n          }\n        });\n      } else {\n        formRef.value?.setData({});\n      }\n    });\n\n    const handleSave = () => {\n      triedToSubmit.value = true;\n      if (id === 'nova') {\n        ComprasService.cadastrar(formData).then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n          } else {\n            router.push(`/compra`);\n          }\n        });\n      } else {\n        ComprasService.atualizar(id, {\n          id: id,\n          ...formData,\n        }).then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n          } else {\n            router.push('/compra');\n          }\n        });\n      }\n    };\n\n    return { formRef, formData, handleSave };\n  },\n};\n</script>\n\n<style scoped>\n.invalid-input {\n  border-color: red;\n}\n</style>\n"],"mappings":";AA+GA,OAAOA,cAAa,MAAO,8CAA8C;AACzE,OAAOC,kBAAiB,MAAO,iCAAiC;AAChE,OAAOC,qBAAoB,MAAO,oCAAoC;AACtE,OAAOC,sBAAqB,MAAO,qCAAqC;AACxE,SAASC,GAAG,EAAEC,QAAQ,EAAEC,WAAU,QAAS,KAAK;AAChD,SAASC,QAAQ,EAAEC,SAAQ,QAAS,YAAY;AAEhD,eAAe;EACbC,IAAI,EAAE,oBAAoB;EAE1BC,UAAU,EAAE;IACVT,kBAAkB;IAClBC,qBAAqB;IACrBC;EACF,CAAC;EAEDQ,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIL,QAAQ,CAAC,CAAC;IACxB,MAAMM,MAAK,GAAIL,SAAS,CAAC,CAAC;IAC1B,MAAMM,OAAM,GAAIV,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMW,EAAC,GAAIH,KAAK,CAACI,MAAM,CAACD,EAAC,IAAK,MAAM;IACpC,MAAME,QAAO,GAAIZ,QAAQ,CAAC;MACxBa,IAAI,EAAE,EAAE;MACRC,SAAS,EAAE,EAAE;MACbC,UAAU,EAAE,EAAE;MACdC,UAAU,EAAE,EAAE;MACdC,KAAK,EAAE;IACT,CAAC,CAAC;IACF,MAAMC,aAAY,GAAInB,GAAG,CAAC,KAAK,CAAC;IAEhCE,WAAW,CAAC,MAAM;MAChB,IAAIS,EAAC,KAAM,MAAM,EAAE;QACjBf,cAAc,CAACwB,OAAO,CAACT,EAAE,CAAC,CAACU,IAAI,CAACC,MAAK,IAAK;UACxC,IAAIA,MAAK,YAAaC,KAAK,EAAE;YAC3BC,KAAK,CAACF,MAAM,CAACG,OAAO,CAAC;YACrBhB,MAAM,CAACiB,IAAI,CAAC,SAAS,CAAC;UACxB,OAAO;YACLb,QAAQ,CAACC,IAAG,GAAIQ,MAAM,CAACR,IAAI;YAC3BD,QAAQ,CAACG,UAAS,GAAIM,MAAM,CAACN,UAAU;YACvCH,QAAQ,CAACE,SAAQ,GAAIO,MAAM,CAACP,SAAS;YACrCF,QAAQ,CAACI,UAAS,GAAIK,MAAM,CAACL,UAAU;YACvCJ,QAAQ,CAACK,KAAI,GAAII,MAAM,CAACJ,KAAK;UAC/B;QACF,CAAC,CAAC;MACJ,OAAO;QACLR,OAAO,CAACiB,KAAK,EAAEC,OAAO,CAAC,CAAC,CAAC,CAAC;MAC5B;IACF,CAAC,CAAC;IAEF,MAAMC,UAAS,GAAIA,CAAA,KAAM;MACvBV,aAAa,CAACQ,KAAI,GAAI,IAAI;MAC1B,IAAIhB,EAAC,KAAM,MAAM,EAAE;QACjBf,cAAc,CAACkC,SAAS,CAACjB,QAAQ,CAAC,CAACQ,IAAI,CAACC,MAAK,IAAK;UAChD,IAAIA,MAAK,YAAaC,KAAK,EAAE;YAC3BC,KAAK,CAACF,MAAM,CAACG,OAAO,CAAC;UACvB,OAAO;YACLhB,MAAM,CAACiB,IAAI,CAAE,SAAQ,CAAC;UACxB;QACF,CAAC,CAAC;MACJ,OAAO;QACL9B,cAAc,CAACmC,SAAS,CAACpB,EAAE,EAAE;UAC3BA,EAAE,EAAEA,EAAE;UACN,GAAGE;QACL,CAAC,CAAC,CAACQ,IAAI,CAACC,MAAK,IAAK;UAChB,IAAIA,MAAK,YAAaC,KAAK,EAAE;YAC3BC,KAAK,CAACF,MAAM,CAACG,OAAO,CAAC;UACvB,OAAO;YACLhB,MAAM,CAACiB,IAAI,CAAC,SAAS,CAAC;UACxB;QACF,CAAC,CAAC;MACJ;IACF,CAAC;IAED,OAAO;MAAEhB,OAAO;MAAEG,QAAQ;MAAEgB;IAAW,CAAC;EAC1C;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
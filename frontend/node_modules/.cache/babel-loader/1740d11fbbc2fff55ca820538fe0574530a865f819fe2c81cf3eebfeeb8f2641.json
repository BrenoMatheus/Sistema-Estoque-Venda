{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport AuthService from '@/services/api/auth/AuthService';\nimport PessoasService from '../../services/api/pessoas/PessoasService';\nimport DashboardComponent from '../Dashboard/DashboardComponent';\nimport { ref, reactive, watchEffect } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nexport default {\n  name: 'PeopleDetailComponent',\n  components: {\n    DashboardComponent\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const formRef = ref(null);\n    const id = route.params.id || 'nova';\n    const formData = reactive({\n      nome: '',\n      idade: '',\n      email: '',\n      senha: '',\n      grupo_pessoa_id: '',\n      genero: '',\n      user_id\n    });\n    const triedToSubmit = ref(false);\n    watchEffect(() => {\n      if (id !== 'nova') {\n        PessoasService.getById(id).then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n            router.push('/pessoas');\n          } else {\n            const {\n              pessoa\n            } = result;\n            formData.nome = pessoa.nome;\n            formData.idade = pessoa.idade;\n            formData.email = pessoa.email;\n            formData.senha = pessoa.senha;\n            formData.grupo_pessoa_id = pessoa.grupo_pessoa_id;\n            formData.genero = pessoa.genero;\n          }\n        });\n      } else {\n        formRef.value?.setData({});\n      }\n    });\n    const handleSave = () => {\n      triedToSubmit.value = true;\n      if (id === 'nova') {\n        AuthService.register(formData.email, formData.password, formData.password_confirmation, formData.nome).then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n          } else {\n            console.log(result);\n            console.log(result.id);\n            formData.user_id = result.id;\n            PessoasService.cadastrar(formData).then(result => {\n              if (result instanceof Error) {\n                alert(result.message);\n              } else {\n                router.push(`/pessoa`);\n              }\n            });\n          }\n        });\n      } else {\n        PessoasService.atualizar(id, {\n          id: id,\n          ...formData\n        }).then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n          } else {\n            router.push('/pessoa');\n          }\n        });\n      }\n    };\n    return {\n      formRef,\n      formData,\n      handleSave\n    };\n  }\n};","map":{"version":3,"names":["AuthService","PessoasService","DashboardComponent","ref","reactive","watchEffect","useRoute","useRouter","name","components","setup","route","router","formRef","id","params","formData","nome","idade","email","senha","grupo_pessoa_id","genero","user_id","triedToSubmit","getById","then","result","Error","alert","message","push","pessoa","value","setData","handleSave","register","password","password_confirmation","console","log","cadastrar","atualizar"],"sources":["/home/brenomatheus/Documentos/Teste Pratico DEV Junior/frontend/src/pages/Pessoa/DetailComponent.vue"],"sourcesContent":["<template>\n  <DashboardComponent>\n    <template v-slot:slot-pages>\n  \n      <!-- Formulário de Cadastro de Pessoa -->\n      <div class=\"flex justify-center items-center  text-gray-700 dark:text-white \">\n        <div class=\"w-full p-4 sm:p-6 md:p-8 dark:bg-gray-800\">\n          <h5\n            class=\"text-xl font-medium text-gray-900 dark:text-white text-center border-b-2 mb-4 pb-4 border-gray-900\"\n          >\n            Cadastro de Pessoa\n          </h5>\n\n          <form ref=\"{formRef}\" @submit.prevent=\"handleSave\" class=\"p-2\">\n            <!-- Nome -->\n            <div class=\"flex flex-wrap -mx-3 mb-6\">\n              <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                <label\n                  for=\"nome\"\n                  class=\"block uppercase tracking-wide  text-xs font-bold mb-2\"\n                  >Nome</label\n                >\n                <input\n                  v-model=\"formData.nome\"\n                  :class=\"{ 'invalid-input': triedToSubmit && !nomeFilled }\"\n                  class=\"appearance-none block w-full bg-gray-200 dark:bg-gray-500 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                  id=\"nome\"\n                  type=\"text\"\n                  placeholder=\"Seu nome Completo\"\n                />\n              </div>\n              <!-- Idade -->\n              <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                <label\n                  for=\"idade\"\n                  class=\"block uppercase tracking-wide  text-xs font-bold mb-2\"\n                  >Idade</label\n                >\n                <input\n                  v-model=\"formData.idade\"\n                  :class=\"{ 'invalid-input': triedToSubmit && !idadeFilled }\"\n                  class=\"appearance-none block w-full bg-gray-200 dark:bg-gray-500  border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                  id=\"idade\"\n                  type=\"number\"\n                  placeholder=\"Sua idade\"\n                />\n              </div>\n            </div>\n            <!-- Email -->\n              <div class=\"w-full mb-6 md:mb-0\">\n                <label\n                  for=\"email\"\n                  class=\"block uppercase tracking-wide  text-xs font-bold mb-2\"\n                  >Email</label\n                >\n                <input\n                  v-model=\"formData.email\"\n                  :class=\"{ 'invalid-input': triedToSubmit && !emailFilled }\"\n                  class=\"appearance-none block w-full bg-gray-200 dark:bg-gray-500  border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                  type=\"email\"\n                  name=\"email\"\n                  id=\"email\"\n                  placeholder=\"Email\"\n                />\n              </div> \n            <div class=\"flex flex-wrap -mx-3 mb-6\">\n              <div class=\"w-full md:w-1/2 px-3\">\n                <label\n                  for=\"senha\"\n                  class=\"block uppercase tracking-wide  text-xs font-bold mb-2\"\n                  >Senha</label\n                >\n                <input\n                  v-model=\"formData.password\"\n                  :class=\"{ 'invalid-input': triedToSubmit && !senhaFilled }\"\n                  class=\"appearance-none block w-full bg-gray-200 dark:bg-gray-500  border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                  id=\"password\"\n                  type=\"password\"\n                  placeholder=\"******************\"\n                />\n              </div>\n              <!-- Senha -->\n              <div class=\"w-full md:w-1/2 px-3\">\n                <label\n                  for=\"password_confirmation\"\n                  class=\"block uppercase tracking-wide  text-xs font-bold mb-2\"\n                  >Confirmar senha</label\n                >\n                <input\n                  v-model=\"formData.password_confirmation\"\n                  :class=\"{ 'invalid-input': triedToSubmit && !senhaFilled }\"\n                  class=\"appearance-none block w-full bg-gray-200 dark:bg-gray-500  border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                  id=\"password_confirmation\"\n                  type=\"password\"\n                  placeholder=\"******************\"\n                />\n              </div>\n            </div>\n\n            <!-- Gênero e Grupo -->\n            <div class=\"flex flex-wrap -mx-3 mb-2\">\n              <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                <!-- Gênero -->\n                <label\n                  for=\"grid-state\"\n                  class=\"block uppercase tracking-wide  text-xs font-bold mb-2\"\n                  >Genero</label\n                >\n                <select\n                  v-model=\"formData.genero\"\n                  :class=\"{ 'invalid-input': triedToSubmit && !generoFilled }\"\n                  class=\"block appearance-none w-full bg-gray-200 dark:bg-gray-500 border border-gray-200  py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                  id=\"grid-state\"\n                >\n                  <option></option>\n                  <option>Masculino</option>\n                  <option>Feminino</option>\n                  <option>Outro...</option>\n                </select>\n              </div>\n              <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                <!-- Grupo -->\n                <label\n                  for=\"grid-state\"\n                  class=\"block uppercase tracking-wide  text-xs font-bold mb-2\"\n                  >Grupo</label\n                >\n                <select\n                  v-model=\"formData.grupo_pessoa_id\"\n                  :class=\"{\n                    'invalid-input': triedToSubmit && !grupoPessoaIdFilled,\n                  }\"\n                  class=\"block appearance-none w-full bg-gray-200 dark:bg-gray-500 border border-gray-200  py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                  id=\"grid-state\"\n                >\n                  <option></option>\n                  <option value=\"1\">Fornecedor</option>\n                  <option value=\"2\">Cliente</option>\n                  <option value=\"3\">Funcionario</option>\n                </select>\n              </div>\n            </div>\n            <div class=\"pt-4\">\n              <button\n                type=\"submit\"\n                class=\"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\"\n              >\n                <template v-if=\"id === 'nova'\"> ok </template>\n                <template v-else> Cadastrar </template>\n              </button>\n            </div>\n            <div class=\"mt-4\">\n              <span\n                class=\"text-center text-sm\"\n                :class=\"{\n                  'text-green-500': sucesso,\n                  'text-red-500': !sucesso && feedbackMessage,\n                }\"\n                >{{ feedbackMessage }}</span\n              >\n            </div>\n          </form>\n        </div>\n      </div>\n    </template>\n  </DashboardComponent>\n</template>\n\n<script>\nimport AuthService from '@/services/api/auth/AuthService';\nimport PessoasService from '../../services/api/pessoas/PessoasService';\nimport DashboardComponent from '../Dashboard/DashboardComponent';\nimport { ref, reactive, watchEffect } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\n\nexport default {\n  name: 'PeopleDetailComponent',\n\n  components: { DashboardComponent },\n\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const formRef = ref(null);\n    const id = route.params.id || 'nova';\n    const formData = reactive({\n      nome: '',\n      idade: '',\n      email: '',\n      senha: '',\n      grupo_pessoa_id: '',\n      genero: '',\n      user_id\n    });\n    const triedToSubmit = ref(false);\n\n    watchEffect(() => {\n      if (id !== 'nova') {\n        PessoasService.getById(id).then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n            router.push('/pessoas');\n          } else {\n            const { pessoa } = result;\n            formData.nome = pessoa.nome;\n            formData.idade = pessoa.idade;\n            formData.email = pessoa.email;\n            formData.senha = pessoa.senha;\n            formData.grupo_pessoa_id = pessoa.grupo_pessoa_id;\n            formData.genero = pessoa.genero;\n          }\n        });\n      } else {\n        formRef.value?.setData({});\n      }\n    });\n\n    const handleSave = () => {\n      triedToSubmit.value = true;\n      if (id === 'nova') {\n        AuthService.register(formData.email,formData.password, formData.password_confirmation,formData.nome).then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n          } else {\n            console.log(result)\n            console.log(result.id)\n            formData.user_id = result.id\n            PessoasService.cadastrar(formData).then(result => {\n              if (result instanceof Error) {\n                alert(result.message);\n              } else {\n                router.push(`/pessoa`);\n              }\n            });\n          }\n        });\n      } else {\n        PessoasService.atualizar(id, {\n          id: id,\n          ...formData,\n        }).then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n          } else {\n            router.push('/pessoa');\n          }\n        });\n      }\n    };\n\n    return { formRef, formData, handleSave };\n  },\n};\n</script>\n\n<style scoped>\n.invalid-input {\n  border-color: red;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}